<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta content="width=device-width, initial-scale=1.0" name="viewport" />

	<link href="img/logo.jpeg" rel="icon" type="image/jpeg" />
	<title>Games</title>
	<link href="css/main.css" rel="stylesheet" />
</head>
<body>

<form id="create-game-form">
	<label for="gameName">Game Name</label>
	<input id="gameName" required type="text" />

	<button type="submit">Create Game</button>
</form>

<a class="primaryButton" href="/" id="back">Back</a>
</body>
<script>
	const form = document.getElementById('create-game-form');

	form.addEventListener('submit', async (event) => {
		event.preventDefault();

		const gameName = document.getElementById('gameName').value;

		const response = await fetch('/api/games', {
			method: 'POST',
			headers: {
				'Content-Type': 'application/json',
			},
			body: JSON.stringify({ gameName }),
		});

		const data = await response.json();
		if (data.error) {
			alert(data.error);
		} else {
			window.location.href = `/games/${data.id}`;
		}
	});
</script>
</html>
