<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta content="width=device-width, initial-scale=1.0" name="viewport" />

	<link href="img/logo.jpeg" rel="icon" type="image/jpeg" />
	<title>Games</title>

	<link href="css/main.css" rel="stylesheet" />
	<style>
      :root {
          --background-color: #292C36;
          --primary-color: #3A3E49;
          --primary-color-active: #3A3E49A3;
          --secondary-color: #2c2f3b;
          --secondary-color-active: #1f2128;
          --green-color: #4E9735;
          --green-color-active: #3A7A26;
          --orange-color: #CC913E;
          --orange-color-active: #A87A2B;
          --red-color: #C93B3B;
          --red-color-active: #A82B2B;
          --blue-color: #43c5d6;
          --blue-color-active: #2998a7;
          --purple-color: #495afc;
          --purple-color-active: #2f3f9f;
          --font-color: #fff;
          --font-color-secondary: #b3b3b3;
          --font-color-tertiary: #8c8c8c;
      }

      body {
          font-family: Arial, sans-serif;
          text-align: center;
          background-color: var(--background-color);
          color: var(--font-color);
      }

      .mainButton {
          display: block;
          width: 200px;
          margin: 20px auto;
          padding: 10px;
          background-color: var(--primary-color);
          color: white;
          text-decoration: none;
          border-radius: 5px;
      }

      .mainButton:hover {
          background-color: var(--primary-color-active);
      }

      #games-list {
          margin: 20px auto;
          width: 80%;
      }

      table {
          width: 100%;
          border-collapse: collapse;
      }

      th, td {
          border: 1px solid var(--primary-color);
          padding: 10px;
      }

      th {
          background-color: var(--primary-color);
          color: var(--font-color);
      }

      td {
          background-color: var(--secondary-color);
          color: var(--font-color-secondary);
      }

      td a {
          color: var(--font-color);
          text-decoration: none;
      }

      td a:hover {
          color: var(--font-color-secondary);
      }

      tr:nth-child(even) {
          background-color: var(--primary-color);
      }

      tr:nth-child(odd) {
          background-color: var(--secondary-color);
      }

      tr:hover {
          background-color: var(--primary-color-active);
      }

      tr:hover td {
          color: var(--font-color);
      }

      tr:hover td a {
          color: var(--font-color);
      }

      #create-game {
          margin: 20px auto;
          width: 80%;
      }

      #create-game input {
          width: 100%;
          padding: 10px;
          margin: 5px 0;
          border-radius: 5px;
          border: 1px solid var(--primary-color);
          background-color: var(--secondary-color);
          color: var(--font-color);
      }
	</style>
</head>
<body>

<div id="create-game">
	<!-- need a name, max player, game, pulic / private + password	-->
	<form>
		<label for="name">Game Name:</label>
		<input id="name" name="name" required type="text" />
		<br />
		<input type="submit" value="Create Game" />
	</form>
</div>

<a class="mainButton" href="/" id="back">Back</a>

</body>

<script>
	const form = document.querySelector('form');
	form.addEventListener('submit', (e) => {
		e.preventDefault();
		const name = document.querySelector('#name').value;
		fetch('/api/games', {
			method: 'POST',
			headers: {
				'Content-Type': 'application/json',
			},
			body: JSON.stringify({ name }),
		})
			.then((res) => res.json())
			.then((data) => {
				if (data.success) {
					window.location.href = `/play/${data.id}`;
				} else {
					alert(data.message);
				}
			});
	});
</script>
</html>
